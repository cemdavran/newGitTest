<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Ucd Components - Home</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="./assets/css/styles.css">
</head>
<body class="home">
  <header class="site-header">
    <div class="container">
      <a class="logo" href="index.html"><img src="./assets/img/Ucd.png" alt="Ucd Components logo" class="logo-img" onerror="this.onerror=null; this.src='./assets/ima/Ucd.png';"><span class="logo-text">Ucd Components</span></a>
      <nav class="nav">
        <a href="index.html">Home</a>
        <a href="contact.html">Contact</a>
      </nav>
    </div>
  </header>

  <main>
    <section class="hero">
      <div class="container">
        <h1>Quality electronic components for your next build</h1>
        <p>Ucd Components sources and supplies ICs, passives, connectors, power solutions, and more — with fast lead times and reliable delivery.</p>
        <a class="btn primary" href="contact.html">Contact us</a>
      </div>
    </section>

    <section class="slideshow">
      <div class="container">
        <div class="slider" id="slider"></div>
        <button class="slider-btn prev" aria-label="Previous" id="slider-prev">‹</button>
        <button class="slider-btn next" aria-label="Next" id="slider-next">›</button>
        <div class="slider-dots" id="slider-dots"></div>
      </div>
    </section>

    <section class="categories">
      <div class="container">
        <h2>What we supply</h2>
        <ul class="category-list">
          <li>ICs & Semiconductors</li>
          <li>Passives: Resistors, Capacitors, Inductors</li>
          <li>Connectors & Cables</li>
          <li>Power & Protection</li>
          <li>Hardware & Enclosures</li>
        </ul>
      </div>
    </section>

    <section class="cta" id="contact">
      <div class="container">
        <h2>Ready to start?</h2>
        <p>Tell us about your project and we’ll get back within 1 business day.</p>
        <a class="btn secondary" href="contact.html">Contact us</a>
      </div>
    </section>
  </main>

  <footer class="site-footer">
    <div class="container">
      <p>© <span id="year"></span> Ucd Components. All rights reserved.</p>
    </div>
  </footer>

  <script>
    (function(){
      const sliderEl = document.getElementById('slider');
      const dotsEl = document.getElementById('slider-dots');
      const prevBtn = document.getElementById('slider-prev');
      const nextBtn = document.getElementById('slider-next');
      if (!sliderEl) return;

      const folder = './assets/slideImg/';
      const extensions = ['jpg','jpeg','png','webp','svg'];

      function toSrc(path) {
        if (/^https?:\/\//i.test(path) || path.startsWith('./') || path.startsWith('../') || path.startsWith('/')) {
          return path;
        }
        return folder + path;
      }

      async function loadFromManualList() {
        if (Array.isArray(window.SLIDES) && window.SLIDES.length > 0) {
          return window.SLIDES.map(toSrc);
        }
        return null;
      }

      async function loadFromDirectoryListing() {
        try {
          const res = await fetch(folder, { method: 'GET' });
          if (!res.ok) return null;
          const html = await res.text();
          const regex = /href=\"([^\"]+\.(?:jpg|jpeg|png|webp|svg))\"/gi;
          const urls = new Set();
          let m;
          while ((m = regex.exec(html)) !== null) {
            const name = m[1].replace(/^\/?/,'');
            urls.add(folder + name);
          }
          return urls.size ? Array.from(urls) : null;
        } catch (_) {
          return null;
        }
      }

      function loadFromCommonNames() {
        const prefixes = ['slide-','', 'img', 'photo-', 'image-'];
        const candidates = [];
        for (let i = 1; i <= 20; i++) {
          for (const p of prefixes) {
            for (const ext of extensions) {
              candidates.push(`${p}${i}.${ext}`);
            }
          }
        }
        return new Promise(resolve => {
          const found = [];
          let pending = candidates.length;
          if (pending === 0) resolve(found);
          candidates.forEach(name => {
            const test = new Image();
            test.onload = () => { found.push(folder + name); if (--pending === 0) resolve(found); };
            test.onerror = () => { if (--pending === 0) resolve(found); };
            test.src = folder + name + `?t=${Date.now()}`;
          });
        });
      }

      function buildSlides(srcs) {
        if (!srcs || srcs.length === 0) {
          prevBtn?.classList.add('hidden');
          nextBtn?.classList.add('hidden');
          dotsEl?.classList.add('hidden');
          return false;
        }
        srcs.forEach((src, idx) => {
          const slide = document.createElement('div');
          slide.className = 'slide' + (idx === 0 ? ' active' : '');
          const img = document.createElement('img');
          img.loading = 'lazy';
          img.decoding = 'async';
          img.src = src;
          img.alt = `Slide ${idx + 1}`;
          slide.appendChild(img);
          sliderEl.appendChild(slide);
          const dot = document.createElement('button');
          dot.className = 'dot' + (idx === 0 ? ' active' : '');
          dot.setAttribute('aria-label', `Go to slide ${idx + 1}`);
          dot.addEventListener('click', () => goTo(idx));
          dotsEl.appendChild(dot);
        });
        initControls();
        return true;
      }

      (async function init() {
        let sources = await loadFromManualList();
        if (!sources) sources = await loadFromDirectoryListing();
        if (!sources || sources.length === 0) sources = await loadFromCommonNames();
        buildSlides(sources || []);
      })();

      let current = 0;
      let timerId = null;

      function show(index) {
        const slides = sliderEl.querySelectorAll('.slide');
        const dots = dotsEl.querySelectorAll('.dot');
        if (slides.length === 0) return;
        current = (index + slides.length) % slides.length;
        slides.forEach((s, i) => s.classList.toggle('active', i === current));
        dots.forEach((d, i) => d.classList.toggle('active', i === current));
      }
      function prev() { show(current - 1); }
      function next() { show(current + 1); }
      function goTo(i) { show(i); }

      function initControls() {
        prevBtn?.addEventListener('click', prev);
        nextBtn?.addEventListener('click', next);
        // autoplay
        function start() { if (!timerId) timerId = setInterval(next, 5000); }
        function stop() { if (timerId) { clearInterval(timerId); timerId = null; } }
        sliderEl.addEventListener('mouseenter', stop);
        sliderEl.addEventListener('mouseleave', start);
        start();
      }
    })();
  </script>

  <script>
    document.getElementById('year').textContent = new Date().getFullYear();
  </script>
</body>
</html>